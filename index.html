<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Basuri V5 Vi·ªát Nam</title>
<style>
  html, body { margin:0; padding:0; overflow:hidden; background:#000; font-family:Arial,sans-serif; }
  #gui {
    position:absolute; top:20px; left:20px; width:300px;
    background:#0e0e0e; padding:16px; border-radius:20px;
    color:#3cff78; text-align:center; box-shadow:0 0 30px #3cff78;
  }
  .neonText{
    font-size:24px; font-weight:bold; color:#00ffff;
    text-shadow:0 0 5px #0ff,0 0 10px #0ff,0 0 20px #0ff,0 0 40px #0ff;
    margin-bottom:10px; animation: glow 1.5s infinite alternate;
  }
  @keyframes glow{
    0% { text-shadow:0 0 5px #0ff,0 0 10px #0ff,0 0 20px #0ff,0 0 40px #0ff; }
    100% { text-shadow:0 0 15px #0ff,0 0 30px #0ff,0 0 40px #0ff,0 0 60px #0ff; }
  }
  .flag{
    font-size:24px; display:inline-block; animation: wave 1s infinite alternate ease-in-out;
  }
  @keyframes wave{ 0%{transform:rotate(0deg);} 50%{transform:rotate(5deg);} 100%{transform:rotate(-5deg);} }
  .controls button{ margin:5px; padding:8px 12px; border:none; border-radius:20px; background:#3cff78; color:#000; cursor:pointer; }
  .controls button:hover{ background:#5dff95; }
  input[type=range]{ width:100%; margin-top:8px; }
</style>
</head>
<body>

<div id="gui">
  <div class="neonText">BASURI V5</div>
  <div class="flag">üáªüá≥</div>
  <div id="songName"></div>
  <audio id="audio"></audio>
  <div class="controls">
    <button onclick="prev()">‚¨ÖÔ∏è</button>
    <button onclick="play()">‚ñ∂</button>
    <button onclick="next()">‚û°Ô∏è</button>
  </div>
  <input type="range" min="0" max="1" step="0.01" value="0.7" oninput="audio.volume=this.value">
  <div class="credit" style="margin-top:10px; font-size:12px; opacity:0.8;">ƒê∆∞·ª£c l√†m b·ªüi: Tu·∫•n ‚úÖ</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/controls/OrbitControls.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/loaders/FontLoader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/geometries/TextGeometry.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.14.0/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tone@14.7.77/build/Tone.js"></script>

<script>
// ----- Audio setup -----
const songs = [
  {file:"TruMua.mp3",name:"Tr√∫ M∆∞a"},
  {file:"chobaolau.mp3",name:"Ch·ªù Bao L√¢u"},
  {file:"laycaykimmaydo.mp3",name:"L·∫•y C√¢y Kim May ƒê·ªì"},
  {file:"yeuroisaoconphat.mp3",name:"Y√™u R·ªìi Sao C√≤n Ph·∫°t"},
  {file:"DangEm.mp3",name:"D√°ng Em"},
  {file:"Melody.mp3",name:"Melody"},
  {file:"bacphan.mp3",name:"B·∫°c Ph·∫≠n"},
  {file:"sunnghiepchuong.mp3",name:"S·ª± Nghi·ªáp Ch∆∞·ªõng"},
  {file:"songcuocdoimonglunglinh.mp3",name:"Cu·ªôc ƒê·ªùi M·ªông Lung Linh"}
];
let index=0;
const audio=document.getElementById("audio");
const songName=document.getElementById("songName");
function load(){ audio.src=songs[index].file; songName.innerText="üéµ "+songs[index].name; }
function play(){ audio.play(); }
function next(){ index=(index+1)%songs.length; load(); play(); }
function prev(){ index=(index-1+songs.length)%songs.length; load(); play(); }
load();

// ----- Three.js 3D scene -----
let scene=new THREE.Scene();
let camera=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,0.1,1000);
camera.position.set(0,3,8);
let renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth,window.innerHeight);
document.body.appendChild(renderer.domElement);
let controls=new THREE.OrbitControls(camera,renderer.domElement);

// Lights
const ambient=new THREE.AmbientLight(0xffffff,0.5);
scene.add(ambient);
const spot=new THREE.SpotLight(0xffd700,2,15);
spot.position.set(0,5,5);
scene.add(spot);
const musicLight=new THREE.PointLight(0xffd700,2,10);
musicLight.position.set(0,4,0);
scene.add(musicLight);

// Loa/xe t·∫£i
const boxGeo=new THREE.BoxGeometry(1,2,1);
const boxMat=new THREE.MeshStandardMaterial({color:0x111111,metalness:0.5,roughness:0.2});
const speaker1=new THREE.Mesh(boxGeo,boxMat);
const speaker2=speaker1.clone();
speaker1.position.x=-2;speaker2.position.x=2;
scene.add(speaker1,speaker2);

// C√≤i v√†ng 3D
const coneGeo=new THREE.ConeGeometry(0.2,0.5,32);
const coneMat=new THREE.MeshStandardMaterial({color:0xffd700,emissive:0xffd700,metalness:0.6,roughness:0.2});
const horn1=new THREE.Mesh(coneGeo,coneMat);
const horn2=horn1.clone();
horn1.position.set(-1,3,-1); horn2.position.set(1,3,-1);
horn1.rotation.x=Math.PI/2; horn2.rotation.x=Math.PI/2;
scene.add(horn1,horn2);

// Ch·ªØ 3D neon
const loader=new THREE.FontLoader();
loader.load('https://threejs.org/examples/fonts/helvetiker_bold.typeface.json',function(font){
  const textGeo=new THREE.TextGeometry('BASURI V5',{font:font,size:0.8,height:0.2,bevelEnabled:true,bevelThickness:0.03,bevelSize:0.02});
  const textMat=new THREE.MeshStandardMaterial({color:0x00ffff,emissive:0x00ffff,metalness:0.5,roughness:0.1});
  const textMesh=new THREE.Mesh(textGeo,textMat);
  textGeo.center();
  textMesh.position.y=4;
  scene.add(textMesh);
  gsap.to(textMesh.rotation,{y:Math.PI*2,duration:25,repeat:-1,ease:"linear"});
});

// C·ªù Vi·ªát Nam (plane)
const flagGeo=new THREE.PlaneGeometry(2,1.2,16,8);
const flagMat=new THREE.MeshBasicMaterial({color:0xff0000,side:THREE.DoubleSide});
const flagMesh=new THREE.Mesh(flagGeo,flagMat);
flagMesh.position.set(0,3,-3);
scene.add(flagMesh);

// Animate flag
const flagVertices=flagGeo.attributes.position.array;
let clock=new THREE.Clock();
function updateFlag(){
  let time=clock.getElapsedTime();
  for(let i=0;i<flagVertices.length;i+=3){
    flagVertices[i+2]=Math.sin(i*0.5+time*5)*0.05;
  }
  flagGeo.attributes.position.needsUpdate=true;
}

// Tone.js music + lights
const player=new Tone.Player("https://cdn.jsdelivr.net/gh/namtienonline/audio-sample/beat.mp3").toDestination();
const fft=new Tone.FFT(32);
player.connect(fft);
player.autostart=true;

function updateLight(){
  const values=fft.getValue();
  const bass=Math.max(...values)+100;
  musicLight.intensity=Math.max(bass/50,0.5);
  const scale=1+Math.max(bass/100,0.05);
  speaker1.scale.y=speaker2.scale.y=scale;
  horn1.scale.y=horn2.scale.y=scale*0.5;
}

// Animate loop
function animateLoop(){
  requestAnimationFrame(animateLoop);
  controls.update();
  updateFlag();
  updateLight();
  renderer.render(scene,camera);
}
animateLoop();

// Resize
window.addEventListener('resize',()=>{camera.aspect=window.innerWidth/window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth,window.innerHeight);});
</script>
</body>
</html>
